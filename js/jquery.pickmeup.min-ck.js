/**
 * @package		PickMeUp - jQuery datepicker plugin
 * @author		Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @author		Stefan Petre <www.eyecon.ro>
 * @copyright	Copyright (c) 2013, Nazar Mokrynskyi
 * @copyright	Copyright (c) 2008-2009, Stefan Petre
 * @license		MIT License, see license.txt
 */(function(e){function t(){var e=new Date(this.toString()),t=28,n=e.getMonth();while(e.getMonth()==n){++t;e.setDate(t)}return t-1}e.addDays=function(e){this.setDate(this.getDate()+e)};e.addMonths=function(e){var n=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+e);this.setDate(Math.min(n,t.apply(this)))};e.addYears=function(e){var n=this.getDate();this.setDate(1);this.setFullYear(this.getFullYear()+e);this.setDate(Math.min(n,t.apply(this)))};e.getDayOfYear=function(){var e=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),t=new Date(this.getFullYear(),0,0,0,0,0),n=e-t;return Math.floor(n/24*60*60*1e3)}})(Date.prototype);(function(e){function r(){var t=e(this).data("pickmeup-options"),r=this.pickmeup,i=Math.floor(t.calendars/2),o,u,a,f,l,c,h=0,p,d,v,m=(new Date).setHours(0,0,0,0).valueOf();r.find(".pmu-instance > :not(nav)").remove();for(var g=0;g<t.calendars;g++){o=new Date(t.current);v=r.find(".pmu-instance").eq(g);if(r.hasClass("pmu-view-years")){o.addYears((g-i)*12);a=o.getFullYear()-6+" - "+(o.getFullYear()+5)}else if(r.hasClass("pmu-view-months")){o.addYears(g-i);a=o.getFullYear()}else if(r.hasClass("pmu-view-days")){o.addMonths(g-i);a=s(o,"B, Y",t.locale)}v.find(".pmu-month").text(a);f=o.getFullYear()-6;u={data:[],class_name:"pmu-years"};for(var y=0;y<12;y++)u.data.push(f+y);d=n.months(u);o.setDate(1);u=[];c=o.getMonth();l=(o.getDay()-t.first_day)%7;o.addDays(-(l+(l<0?7:0)));h=0;while(h<42){l={text:o.getDate(),class_name:[]};c!=o.getMonth()&&l.class_name.push("pmu-not-in-month");o.getDay()==0?l.class_name.push("pmu-sunday"):o.getDay()==6&&l.class_name.push("pmu-saturday");var b=t.render(o)||{},w=o.valueOf(),E=t.min&&t.min>o||t.max&&t.max<o;!E&&(b.selected||t.date==w||e.inArray(w,t.date)>-1||t.mode=="range"&&w>=t.date[0]&&w<=t.date[1])&&l.class_name.push("pmu-selected");w==m&&l.class_name.push("pmu-today");(b.disabled||E)&&l.class_name.push("pmu-disabled");b.class_name&&l.class_name.push(b.class_name);l.class_name=l.class_name.join(" ");u.push(l);o.addDays(1);h++}d=n.days(u)+d;u={data:t.locale.monthsShort,class_name:"pmu-months"};d=n.months(u)+d;v.append(d)}}function i(e,t){if(e.constructor==Date)return e;var n=e.split(/\W+/),r=t.split(/\W+/),i,s,o,u,a,f=new Date;for(var l=0;l<n.length;l++)switch(r[l]){case"d":case"e":i=parseInt(n[l],10);break;case"m":s=parseInt(n[l],10)-1;break;case"Y":case"y":o=parseInt(n[l],10);o+=o>100?0:o<29?2e3:1900;break;case"H":case"I":case"k":case"l":u=parseInt(n[l],10);break;case"P":case"p":/pm/i.test(n[l])&&u<12?u+=12:/am/i.test(n[l])&&u>=12&&(u-=12);break;case"M":a=parseInt(n[l],10)}return new Date(o===undefined?f.getFullYear():o,s===undefined?f.getMonth():s,i===undefined?f.getDate():i,u===undefined?f.getHours():u,a===undefined?f.getMinutes():a,0)}function s(e,t,n){var r=e.getMonth(),i=e.getDate(),s=e.getFullYear(),o=e.getDay(),u={},a=e.getHours(),f=a>=12,l=f?a-12:a,c=e.getDayOfYear();l==0&&(l=12);var h=e.getMinutes(),p=e.getSeconds(),d=t.split(""),v;for(var m=0;m<d.length;m++){v=d[m];switch(v){case"a":v=n.daysShort[o];break;case"A":v=n.days[o];break;case"b":v=n.monthsShort[r];break;case"B":v=n.months[r];break;case"C":v=1+Math.floor(s/100);break;case"d":v=i<10?"0"+i:i;break;case"e":v=i;break;case"H":v=a<10?"0"+a:a;break;case"I":v=l<10?"0"+l:l;break;case"j":v=c<100?c<10?"00"+c:"0"+c:c;break;case"k":v=a;break;case"l":v=l;break;case"m":v=r<9?"0"+(1+r):1+r;break;case"M":v=h<10?"0"+h:h;break;case"p":case"P":v=f?"PM":"AM";break;case"s":v=Math.floor(e.getTime()/1e3);break;case"S":v=p<10?"0"+p:p;break;case"u":v=o+1;break;case"w":v=o;break;case"y":v=(""+s).substr(2,2);break;case"Y":v=s}d[m]=v}return d.join("")}function o(t){var n=e(t.target);if(n.hasClass("pmu-button")){if(n.hasClass("pmu-disabled"))return!1;var r=e(this).data("pickmeup-options"),i=n.parents(".pmu-instance").eq(0),o=i.parent(),a=e(".pmu-instance",o).index(i),f=new Date(r.current),l;if(n.parent().is("nav"))if(n.hasClass("pmu-month")){f.addMonths(a-Math.floor(r.calendars/2));if(o.hasClass("pmu-view-years")){o.removeClass("pmu-view-years").addClass("pmu-view-days");n.text(s(f,"B, Y",r.locale))}else if(o.hasClass("pmu-view-months")){o.removeClass("pmu-view-months").addClass("pmu-view-years");n.text(f.getFullYear()-6+" - "+(f.getFullYear()+5))}else if(o.hasClass("pmu-view-days")){o.removeClass("pmu-view-days").addClass("pmu-view-months");n.text(f.getFullYear())}}else{var c=n.hasClass("pmu-prev");o.hasClass("pmu-view-years")?r.current.addYears(c?-12:12):o.hasClass("pmu-view-months")?r.current.addYears(c?-1:1):o.hasClass("pmu-view-days")&&r.current.addMonths(c?-1:1)}else if(!n.hasClass("pmu-disabled"))if(o.hasClass("pmu-view-years")){r.current.setFullYear(parseInt(n.text(),10));o.removeClass("pmu-view-years").addClass("pmu-view-months")}else if(o.hasClass("pmu-view-months")){r.current.setMonth(i.find(".pmu-months .pmu-button").index(n));r.current.setFullYear(parseInt(i.find(".pmu-month").text(),10));r.current.addMonths(Math.floor(r.calendars/2)-a);o.removeClass("pmu-view-months").addClass("pmu-view-days")}else{l=parseInt(n.text(),10);f.addMonths(a-Math.floor(r.calendars/2));n.hasClass("pmu-not-in-month")&&f.addMonths(l>15?-1:1);f.setDate(l);switch(r.mode){case"multiple":l=f.setHours(0,0,0,0).valueOf();e.inArray(l,r.date)>-1?e.each(r.date,function(e,t){if(t==l){r.date.splice(e,1);return!1}return!0}):r.date.push(l);break;case"range":r.lastSel||(r.date[0]=f.setHours(0,0,0,0).valueOf());l=f.setHours(23,59,59,0).valueOf();if(l<r.date[0]){r.date[1]=r.date[0]+86399e3;r.date[0]=l-86399e3}else r.date[1]=l;r.lastSel=!r.lastSel;break;default:r.date=f.valueOf()}r.change.apply(this,u(r));if(r.hide_on_select&&(r.mode!="range"||!r.lastSel)){r.binded.hide();return!1}}r.binded.fill()}return!1}function u(t){var n;if(t.mode=="single"){n=new Date(t.date);return[s(n,t.format,t.locale),n]}n=[[],[]];e.each(t.date,function(e,r){var i=new Date(r);n[0].push(s(i,t.format,t.locale));n[1].push(i)});return n}function a(t){var n=this.pickmeup;if(t||!n.is(":visible")){var r=e(this),i=r.data("pickmeup-options"),s=r.offset(),o={l:document.documentElement.scrollLeft,t:document.documentElement.scrollTop,w:document.documentElement.clientWidth,h:document.documentElement.clientHeight},u=s.top,a=s.left;i.binded.fill();i.before_show();switch(i.position){case"top":u-=n.outerHeight();break;case"left":a-=n.outerWidth();break;case"right":a+=this.offsetWidth;break;case"bottom":u+=this.offsetHeight}u+n.offsetHeight>o.t+o.h&&(u=s.top-n.offsetHeight);u<o.t&&(u=s.top+this.offsetHeight+n.offsetHeight);a+n.offsetWidth>o.l+o.w&&(a=s.left-n.offsetWidth);a<o.l&&(a=s.left+this.offsetWidth);if(i.show()==0)return;n.css({display:"inline-block",top:u+"px",left:a+"px"});e(document).on("mousedown",i.binded.hide).on("resize",[!0],i.binded.forced_show)}}function f(){a.call(this,!0)}function l(t){if(!t||!t.target||t.target!=this&&!(this.pickmeup.get(0).compareDocumentPosition(t.target)&16)){var n=this.pickmeup,r=e(this).data("pickmeup-options");if(r.hide()!=0){n.hide();e(document).off("mousedown",r.binded.hide).off("resize",r.binded.forced_show);r.date[1]=r.date[0];r.lastSel=!1}}}function c(){var t=e(this).data("pickmeup-options");e(document).off("mousedown",t.binded.hide).off("resize",t.binded.forced_show);t.binded.forced_show()}function h(){var t=e(this).data("pickmeup-options");if(t.mode!="single"){t.date=[];t.binded.fill()}}function p(t){return u(e(this).data("pickmeup-options"))[t?0:1]}function d(t){var n=e(this).data("pickmeup-options");n.date=t;typeof n.date=="string"?n.date=i(n.date,n.format).setHours(0,0,0,0):n.date.constructor==Date&&n.date.setHours(0,0,0,0);if(!n.date){n.date=new Date;n.date.setHours(0,0,0,0)}if(n.mode!="single")if(n.date.constructor!=Array){n.date=[n.date.valueOf()];n.mode=="range"&&n.date.push((new Date(n.date[0])).setHours(23,59,59,0).valueOf())}else{for(var r=0;r<n.date.length;r++)n.date[r]=i(n.date[r],n.format).setHours(0,0,0,0).valueOf();n.mode=="range"&&(n.date[1]=(new Date(n.date[1])).setHours(23,59,59,0).valueOf())}else n.date=n.date.valueOf();n.current=new Date(n.mode!="single"?n.date[0]:n.date);n.binded.fill()}e.pickmeup=e.extend(e.pickmeup||{},{date:new Date,flat:!1,first_day:1,prev:"&#9664;",next:"&#9654;",mode:"single",view:"days",calendars:1,format:"d-m-Y",position:"bottom",trigger_event:"click",class_name:"",hide_on_select:!1,min:null,max:null,render:function(){},change:function(){return!0},before_show:function(){return!0},show:function(){return!0},hide:function(){return!0},locale:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}});var t={years:"pmu-view-years",months:"pmu-view-months",days:"pmu-view-days"},n={wrapper:'<div class="pickmeup" />',head:function(e){var t="";for(var n=0;n<7;++n)t+="<div>"+e.day[n]+"</div>";return'<div class="pmu-instance"><nav><div class="pmu-prev pmu-button">'+e.prev+'</div><div class="pmu-month pmu-button" /><div class="pmu-next pmu-button">'+e.next+'</div></nav><nav class="pmu-day-of-week">'+t+"</nav></div>"},days:function(e){var t="";for(var n=0;n<42;++n)t+='<div class="'+e[n].class_name+' pmu-button">'+e[n].text+"</div>";return'<div class="pmu-days">'+t+"</div>"},months:function(e){var t="";for(var n=0;n<12;++n)t+='<div class="pmu-button">'+e.data[n]+"</div>";return'<div class="'+e.class_name+'">'+t+"</div>"}};e.fn.pickmeup=function(s){if(typeof s=="string"){var u,v=Array.prototype.slice.call(arguments,1);switch(s){case"hide":case"show":case"clear":case"update":this.each(function(){u=e(this).data("pickmeup-options");u&&u.binded[s]()});break;case"get_date":u=this.data("pickmeup-options");return u?u.binded.get_date(v[0]):null;case"set_date":this.each(function(){u=e(this).data("pickmeup-options");u&&u.binded[s].apply(this,v)})}return this}return this.each(function(){var u=e(this),v=u.data("pickmeup-options");if(v)return;var m,g;s=e.extend({},e.pickmeup,s||{});for(m in s){g=u.data("pmu-"+m);typeof g!="undefined"&&(s[m]=g)}s.calendars=Math.max(1,parseInt(s.calendars,10)||1);s.mode=/single|multiple|range/.test(s.mode)?s.mode:"single";typeof s.min=="string"?s.min=i(s.min,s.format).setHours(0,0,0,0):s.min&&s.min.constructor==Date&&s.min.setHours(0,0,0,0);typeof s.max=="string"?s.max=i(s.max,s.format).setHours(23,59,59,0):s.max&&s.max.constructor==Date&&s.max.setHours(23,59,59,0);typeof s.date=="string"?s.date=i(s.date,s.format).setHours(0,0,0,0):s.date.constructor==Date&&s.date.setHours(0,0,0,0);if(!s.date){s.date=new Date;s.date.setHours(0,0,0,0)}if(s.mode!="single"){if(s.date.constructor!=Array){s.date=[s.date.valueOf()];s.mode=="range"&&s.date.push((new Date(s.date[0])).setHours(23,59,59,0).valueOf())}else{for(m=0;m<s.date.length;m++)s.date[m]=i(s.date[m],s.format).setHours(0,0,0,0).valueOf();s.mode=="range"&&(s.date[1]=(new Date(s.date[1])).setHours(23,59,59,0).valueOf())}s.current=new Date(s.date[0])}else{s.date=s.date.valueOf();s.current=new Date(s.date)}s.current.setDate(1);s.current.setHours(0,0,0,0);var y,b=e(n.wrapper);this.pickmeup=b;s.class_name&&b.addClass(s.class_name);var w="";for(m=0;m<s.calendars;m++){y=s.first_day;w+=n.head({prev:s.prev,next:s.next,day:[s.locale.daysMin[y++%7],s.locale.daysMin[y++%7],s.locale.daysMin[y++%7],s.locale.daysMin[y++%7],s.locale.daysMin[y++%7],s.locale.daysMin[y++%7],s.locale.daysMin[y++%7]]})}u.data("pickmeup-options",s);for(m in s)e.inArray(m,["render","change","before_show","show","hide"])!=-1&&(s[m]=s[m].bind(this));s.binded={fill:r.bind(this),click:o.bind(this),show:a.bind(this),forced_show:f.bind(this),hide:l.bind(this),update:c.bind(this),clear:h.bind(this),get_date:p.bind(this),set_date:d.bind(this)};b.on("click",s.binded.click).addClass(t[s.view]).append(w).on(e.support.selectstart?"selectstart":"mousedown",function(e){e.preventDefault()});s.binded.fill();if(s.flat)b.appendTo(this).css({position:"relative",display:"inline-block"});else{b.appendTo(document.body);u.on(s.trigger_event,s.binded.show)}})}})(jQuery);